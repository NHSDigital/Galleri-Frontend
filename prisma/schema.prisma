datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  relationMode = "prisma"
}

model User {
  id                        String                  @id
  username                  String                  @unique
  password                  String?
  email                     String                  @unique
  emailVerifiedAt           DateTime?               @db.Timestamptz
  displayName               String?

  appleId                   String?                 @unique
  googleId                  String?                 @unique
  sessions                  Session[]
  createdAt                 DateTime                @db.Timestamptz @default(now())
  updatedAt                 DateTime                @db.Timestamptz @updatedAt
}

model Session {
  id           BigInt       @id @default(autoincrement())
  sessionToken String       @unique
  user         User         @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId       String
  createdAt    DateTime     @db.Timestamptz @default(now())
  updatedAt    DateTime     @db.Timestamptz @updatedAt
  expires      DateTime     @db.Timestamptz
  ip           String?      @db.Inet
  useragent    String?
}
